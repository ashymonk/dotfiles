# ~/.shrc

echo "Loading ~/.shrc..." >&2

# If not running interactively, don't do anything
case "$-" in
    *i*) ;;
    *)   return ;;
esac

# Git for Windows
if command -v git.exe >/dev/null 2>&1; then
    echo "Found Git for Windows." >&2

    # checks to see if we are in a windows or linux dir
    isWinDir() {
        case "$(pwd -P)/" in
            /mnt/*) return 0 ;;
            *)      return 1 ;;
        esac
    }

    # wrap the git command to either run windows git or linux
    git() {
        if isWinDir; then
            git.exe "$@"
        else
            /usr/bin/git "$@"
        fi
    }
fi

# Android Debug Bridge for Windows
if command -v adb.exe >/dev/null 2>&1; then
    echo "Found Android Debug Bridge for Windows." >&2

    adb() {
        adb.exe "$@"
    }
fi

# print exit status if error
exit_status() {
    status=$?
    if [ "$status" -ne 0 ]; then
        printf '[%3d]' "$status"
    else
        printf '[---]'
    fi
}

# Print banner only for sh / dash
case "$(basename "$0")" in
    sh|ash|dash)
        ;;
    *)
        return
        ;;
esac

# Set HOSTNAME
export HOSTNAME=$(uname -n)

# Set prompt
PS1='
${USER}@${HOSTNAME}: ${PWD}
$(exit_status) \$ '

# Print banner
echo
echo "    Welcome to Bourne Shell!"
echo
command -v fetch >/dev/null 2>&1 && fetch
