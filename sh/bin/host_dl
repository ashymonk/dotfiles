#! /bin/sh

hostname=$(echo $(basename "$0") | sed s/_dl//)
local_dest=.

set -- "$@" --

while [ $# -gt 0 ]
do
    case $1 in
        --)
            shift 1
            break
            ;;
        -d)
            local_dest="$2"
            shift 2
            ;;
        -r)
            set -- "$@" -r
            shift 1
            ;;
        -T)
            set -- "$@" -T
            shift 1
            ;;
        -o)
            set -- "$@" -o "$2"
            shift 2
            ;;
        *)
            set -- "$@" $hostname:"\"$1\""
            shift 1
            ;;
    esac
done

scp "$@" "$local_dest"
exit $?
